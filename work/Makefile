# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.33.28

# Directory : "f:/files/HDL/superscaler processors/test1/"
# Platform  : GHDL
# Generated : 2014-12-06 19:59:26 root


# Define compilation command and options

COMPILE = ghdl
OPTIONS = -i --workdir=work --ieee=synopsys -fexplicit 


# Define library paths

LIBRARY-work = work


# Define library unit files

UNIT-work-alu1 = \
	$(LIBRARY-work)/alu1/entity
UNIT-work-alu1-rtl = \
	$(LIBRARY-work)/alu1/rtl
UNIT-work-alu2 = \
	$(LIBRARY-work)/alu2/entity
UNIT-work-alu2-rtl = \
	$(LIBRARY-work)/alu2/rtl
UNIT-work-array_pkg = \
	$(LIBRARY-work)/array_pkg/package
UNIT-work-mem = \
	$(LIBRARY-work)/mem/entity
UNIT-work-mem-sram = \
	$(LIBRARY-work)/mem/sram
UNIT-work-processor = \
	$(LIBRARY-work)/processor/entity
UNIT-work-processor-rtl = \
	$(LIBRARY-work)/processor/rtl


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-alu1) \
	$(UNIT-work-alu1-rtl) \
	$(UNIT-work-alu2) \
	$(UNIT-work-alu2-rtl) \
	$(UNIT-work-array_pkg) \
	$(UNIT-work-mem) \
	$(UNIT-work-mem-sram) \
	$(UNIT-work-processor) \
	$(UNIT-work-processor-rtl)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	mkdir $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

alu1 : \
		library \
		$(UNIT-work-alu1) \
		$(UNIT-work-alu1-rtl)

alu2 : \
		library \
		$(UNIT-work-alu2) \
		$(UNIT-work-alu2-rtl)

array_pkg : \
		library \
		$(UNIT-work-array_pkg)

mem : \
		library \
		$(UNIT-work-mem) \
		$(UNIT-work-mem-sram) \
		array_pkg

processor : \
		library \
		$(UNIT-work-processor) \
		$(UNIT-work-processor-rtl) \
		alu1 \
		alu2 \
		array_pkg \
		mem


# Rules for compiling single library unit files

$(UNIT-work-alu1) \
$(UNIT-work-alu1-rtl) : \
		alu1.vhd
	$(COMPILE) $(OPTIONS) alu1.vhd

$(UNIT-work-alu2) \
$(UNIT-work-alu2-rtl) : \
		alu2.vhd
	$(COMPILE) $(OPTIONS) alu2.vhd

$(UNIT-work-array_pkg) : \
		array_pkg.vhd
	$(COMPILE) $(OPTIONS) array_pkg.vhd

$(UNIT-work-mem) \
$(UNIT-work-mem-sram) : \
		mem.vhd \
		$(UNIT-work-array_pkg)
	$(COMPILE) $(OPTIONS) mem.vhd

$(UNIT-work-processor) \
$(UNIT-work-processor-rtl) : \
		processor.vhd \
		$(UNIT-work-alu1) \
		$(UNIT-work-alu2) \
		$(UNIT-work-array_pkg) \
		$(UNIT-work-mem)
	$(COMPILE) $(OPTIONS) processor.vhd


### Makefile ends here
